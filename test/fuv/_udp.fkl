(import (prefix (.. .. lib fuv) uv-))

(import (only (.. .. lib utils m) assert))

(define loop (uv-make-loop))

(define udp (uv-make-udp loop))

(assert (uv-udp? udp))
(assert (uv-handle? udp))

(assert (not (uv-udp-using-recvmmsg? udp)))
(prin1n (uv-udp-recv-stop udp))
(prin1n (uv-udp-send-queue-size udp))
(prin1n (uv-udp-send-queue-count udp))

(define udp (uv-make-udp loop 'recvmmsg 114))
(assert (uv-udp? udp))
(assert (uv-handle? udp))
(assert (uv-udp-using-recvmmsg? udp))

(prin1n (pcall uv-udp-connect udp nil nil))
